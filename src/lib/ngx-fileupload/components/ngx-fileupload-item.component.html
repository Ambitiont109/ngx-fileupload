<ng-template #defaultUploadItem let-uploadData="data" let-control="ctrl">

    <div class="upload-item">
        <div class="upload-item--header">{{uploadData.name}}</div>

        <div class="upload-item--body">
            <!-- upload state -->
            <div class="upload-item--state">
                <i [ngClass]="['ngx-fileupload-icon--' + uploadData.state]"></i>
            </div>

            <!-- file progress: current state | progressbar -->
            <div class="upload-item--progress">
                <div class="progressbar">
                    <span class="label-size">{{uploadData.size | bytes : 2}}</span>
                    <div class="progressbar-inner" [ngStyle]="{width: uploadData.progress + '%'}"></div>
                </div>
            </div>

            <!-- upload actions: cancel | retry -->
            <div class="upload-item--actions">

                <!-- start upload action -->
                <button type="button" class="item-action--upload" (click)="control.start()" *ngIf="!uploadData.hasError"
                    [disabled]="uploadData.state !== 'queued' || !uploadData.isValid">
                    <i class="ngx-fileupload-icon--upload"></i>
                </button>

                <!-- retry upload action -->
                <button type="button" class="item-action--retry" (click)="control.retry()" *ngIf="uploadData.hasError">
                    <i class="ngx-fileupload-icon--retry"></i>
                </button>

                <!-- only if running -->
                <button type="button" class="item-action--stop" (click)="control.stop()">
                    <i class="ngx-fileupload-icon--cancel"></i>
                </button>

            </div>
        </div>

        <div class="upload-item--notification" [ngClass]="{'error': uploadData.hasError || !uploadData.isValid}">
            {{uploadData.message}}
        </div>
    </div>
</ng-template>

<!-- display item template at this point -->
<ng-container [ngTemplateOutlet]="itemTpl" [ngTemplateOutletContext]="context"></ng-container>
